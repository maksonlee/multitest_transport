load("//multitest_transport:adapter.bzl", "ng_module", "per_file_sass_binaries", "third_party_js")

package(default_applicable_licenses = ["//multitest_transport:license"])

licenses(["notice"])

per_file_sass_binaries(
    name = "styles",
    srcs = glob(["*.scss"]),
    deps = ["//multitest_transport/ui2:constants"],
)

ng_module(
    name = "test_runs",
    srcs = [
        "attempt_status.ts",
        "new_test_run_page.ts",
        "test_module_result_list.ts",
        "test_package_info_pipe.ts",
        "test_resource_list.ts",
        "test_run_config_editor.ts",
        "test_run_config_list.ts",
        "test_run_config_summary.ts",
        "test_run_console.ts",
        "test_run_detail.ts",
        "test_run_detail_page.ts",
        "test_run_failures.ts",
        "test_run_list.ts",
        "test_run_list_page.ts",
        "test_run_progress.ts",
        "test_run_results.ts",
        "test_run_sequence_editor.ts",
        "test_run_sequence_list.ts",
        "test_run_target_picker.ts",
        "test_run_tree_table.ts",
        "test_runs_module.ts",
    ],
    assets = [
        ":styles",
        "attempt_status.ng.html",
        "new_test_run_page.ng.html",
        "test_module_result_list.ng.html",
        "test_resource_list.ng.html",
        "test_run_config_editor.ng.html",
        "test_run_config_list.ng.html",
        "test_run_config_summary.ng.html",
        "test_run_console.ng.html",
        "test_run_detail.ng.html",
        "test_run_detail_page.ng.html",
        "test_run_failures.ng.html",
        "test_run_list.ng.html",
        "test_run_list_page.ng.html",
        "test_run_progress.ng.html",
        "test_run_sequence_editor.ng.html",
        "test_run_sequence_list.ng.html",
        "test_run_target_picker.ng.html",
    ],
    strict_templates = False,
    visibility = ["//multitest_transport"],
    deps = [
        third_party_js("angular_components:cdk_a11y"),
        third_party_js("angular_components:cdk_collections"),
        third_party_js("angular_components:cdk_keycodes"),
        third_party_js("angular2:core"),
        third_party_js("angular_components:material_legacy_autocomplete"),
        third_party_js("angular_components:material_legacy_button"),
        third_party_js("angular_components:material_legacy_chips"),
        third_party_js("angular_components:material_legacy_core"),
        third_party_js("angular_components:material_legacy_dialog"),
        third_party_js("angular_components:material_table"),
        third_party_js("angular_components:material_legacy_tabs"),
        third_party_js("angular_components:material_stepper"),
        third_party_js("angular_components:material_legacy_table"),
        third_party_js("angular2:platform_browser"),
        third_party_js("angular2:router"),
        third_party_js("moment:typings"),
        third_party_js("rxjs"),
        "//multitest_transport/ui2/app/build_channels",
        "//multitest_transport/ui2/app/device_actions",
        "//multitest_transport/ui2/app/devices",
        "//multitest_transport/ui2/app/services",
        "//multitest_transport/ui2/app/shared",
        "//multitest_transport/ui2/app/test_run_actions",
    ],
)

ng_module(
    name = "tests",
    testonly = True,
    srcs = [
        "attempt_status_test.ts",
        "new_test_run_page_test.ts",
        "test_module_result_list_test.ts",
        "test_package_info_pipe_test.ts",
        "test_resource_list_test.ts",
        "test_run_config_editor_test.ts",
        "test_run_config_list_test.ts",
        "test_run_config_summary_test.ts",
        "test_run_console_test.ts",
        "test_run_detail_test.ts",
        "test_run_failures_test.ts",
        "test_run_list_test.ts",
        "test_run_progress_test.ts",
        "test_run_results_test.ts",
        "test_run_sequence_editor_test.ts",
        "test_run_sequence_list_test.ts",
        "test_run_target_picker_test.ts",
        "test_run_tree_table_test.ts",
    ],
    visibility = ["//multitest_transport"],
    deps = [
        ":test_runs",
        third_party_js("angular_components:cdk_a11y"),
        third_party_js("angular2:common_http_testing"),
        third_party_js("angular2:core"),
        third_party_js("angular2:core_testing"),
        third_party_js("angular_components:material_legacy_chips"),
        third_party_js("angular_components:material_legacy_dialog"),
        third_party_js("angular2:platform_browser"),
        third_party_js("angular2:platform_browser_animations"),
        third_party_js("angular2:router"),
        third_party_js("angular2:router_testing"),
        third_party_js("moment:typings"),
        third_party_js("rxjs"),
        third_party_js("typings/jasmine"),
        "//multitest_transport/ui2/app/devices",
        "//multitest_transport/ui2/app/services",
        "//multitest_transport/ui2/app/shared",
        "//multitest_transport/ui2/app/test_run_actions",
        "//multitest_transport/ui2/app/testing:jasmine_util",
        "//multitest_transport/ui2/app/testing:test_util",
    ],
)
